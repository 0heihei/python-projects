import requests
import urllib.request
import urllib.parse
import os, sys
import http.cookiejar
import zlib, json

vfcode_url = "https://jaccount.sjtu.edu.cn/jaccount/captcha?14957079766180.7224017846671493"
post_url = "https://jaccount.sjtu.edu.cn/jaccount/ulogin"

# usr = "duanyunzhi"
# pwd = ""

cookie_jar = http.cookiejar.CookieJar()
cookies = open('cookies.txt').read()
for cookie in json.loads(cookies):
	cookie_jar.set_cookie(
		http.cookiejar.Cookie(version=0, name=cookie['name'], value=cookie['value'], port=None, port_specified=False,
							  domain=cookie['domain'], domain_specified=False, domain_initial_dot=False,
							  path=cookie['path'], path_specified=True, secure=cookie['secure'], expires=None,
							  discard=True, comment=None, comment_url=None, rest={'HttpOnly': None}, rfc2109=False))
handler = urllib.request.HTTPCookieProcessor(cookie_jar)
opener = urllib.request.build_opener(handler)

vfcode = opener.open(vfcode_url).read()
with open('vf_code.png', 'wb') as f:
	f.write(vfcode)
os.startfile("vf_code.png")
captcha = input("输入验证码：")

formData = {
	'sid': 'jaxuanke091229',
	'returl': 'COWtRo8GzMaJxCg5/CJiKPGgasmNnO+tEP1VGsgt3Rn6KsMulEKJT4YNzP9UF98SrObw9mABbH8W',
	'se': 'COzpTepE1nwYYgDE3D+HtTavKoq5MJab3UE7JhfaqULIS7oO0yrNloQ=',
	'v': '',
	'user': 'duanyunzhi',
	'pass': 'sjtu184052',
	'captcha': captcha
}
formData = urllib.parse.urlencode(formData).encode("utf8")

headers = {
	'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
	'Accept-Encoding': 'gzip, deflate, br',
	'Accept-Language': 'zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.4,ja;q=0.2,zh-TW;q=0.2',
	'Cache-Control': 'max-age=0',
	'Connection': 'keep-alive',
	'Content-Type': 'application/x-www-form-urlencoded',
	'Cookie': 'JSESSIONID=941458A2C40B707940B0B25F5BF3B47F.jaccount105; JAVisitedSites="CPdgTWiV89s1hfcpQzuel03ExukpfCasak+H/2QTM6YN91DoMNFZ6kY="; JACCOUNT=jaccount.jaccount105',
	'Upgrade-Insecure-Requests': '1',
	'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36'
}
req = urllib.request.Request(post_url, formData, headers)
res = opener.open(req)

post_data2 = {
	'__VIEWSTATE': '/wEPDwUKLTQzMTk1OTAyMg8WAh4EeGtsYwUBMWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFCUNoZWNrQm94MWNhFMcb/llVDn1pEFCfZhKhz0Iu',
	'__VIEWSTATEGENERATOR': '3E0056E4',
	'__EVENTVALIDATION': '/wEWAwLo2+nsBgKC5Ne7CQKYm8bUB30QDdUU0pi5HAxqqqHPwRKssl/e',
	'CheckBox1': 'on',
	'btnContinue': '继续'
}
post_data2 = urllib.parse.urlencode(post_data2).encode('utf8')
headers['Cookie'] = 'ASP.NET_SessionId=xijtji551doxg055icfpda45; mail_test_cookie=IHIBHIAK'
req2 = urllib.request.Request("http://electsys.sjtu.edu.cn/edu/student/elect/electwarning.aspx?xklc=1", post_data2,
							  headers)
res2 = opener.open(req2)
print(res2.read().decode('utf8'))

course_type = '通识课'
post_data3 = {

	'__VIEWSTATE': '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dGFyZ2V0PV9ibGFuaz7lpKflrabniannkIbvvIhB57G777yJ77yIMu+8ie+8iDEtMTblkajvvIlb5LiK6ZmiMzE5XTwvYT48YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nIHJvd3NwYW49Mj48YSBocmVmPScuLi8uLi9sZXNzb24vdmlld0xlc3NvbkFycmFuZ2VEZXRhaWwyLmFzcHg/YnNpZD0zODM3MDAnIHRhcmdldD1fYmxhbms+55S15bel5LiO55S15a2Q5oqA5pyv77yIROexu++8ie+8iDEtMTblkajvvIlb5LiL6ZmiMjEyXTwvYT48YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nIHJvd3NwYW49Mj48YSBocmVmPScuLi8uLi9sZXNzb24vdmlld0xlc3NvbkFycmFuZ2VEZXRhaWwyLmFzcHg/YnNpZD0zODQ3MDUnIHRhcmdldD1fYmxhbms+5pWw55CG5pa55rOV77yIMS0xNeWRqO+8iVvkuIvpmaIyMTJdPC9hPuWNleWRqDxicj4gPC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgcm93c3Bhbj0yPjxhIGhyZWY9Jy4uLy4uL2xlc3Nvbi92aWV3TGVzc29uQXJyYW5nZURldGFpbDIuYXNweD9ic2lkPTM4NDI0OScgdGFyZ2V0PV9ibGFuaz7mnZDmlpnng63lipvlrabvvIgxLTE25ZGo77yJW+S4i+mZojMwNl08L2E+PGJyPiA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyByb3dzcGFuPTI+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9MzgzNjg2JyB0YXJnZXQ9X2JsYW5rPuW3peeoi+WbvuWtpu+8iDHvvInvvIgxLTE25ZGo77yJW+S4iumZojIwNV08L2E+PGJyPiA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+IDwvdHI+IDx0cj4gPHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc3RpdDInPjIgPC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPiA8L3RyPiA8dHI+IDx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3N0aXQyJz4zIDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyByb3dzcGFuPTI+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9Mzg0MjQ5JyB0YXJnZXQ9X2JsYW5rPuadkOaWmeeDreWKm+Wtpu+8iDEtMTblkajvvIlb5LiL6ZmiMzA2XTwvYT48YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nIHJvd3NwYW49Mj48YSBocmVmPScuLi8uLi9sZXNzb24vdmlld0xlc3NvbkFycmFuZ2VEZXRhaWwyLmFzcHg/YnNpZD0zODQ2MTknIHRhcmdldD1fYmxhbms+5aSn5a2m54mp55CG77yIQeexu++8ie+8iDLvvInvvIgxLTE25ZGo77yJW+S4iumZojMxOV08L2E+PGJyPiA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyByb3dzcGFuPTI+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9MzgzNzAwJyB0YXJnZXQ9X2JsYW5rPueUteW3peS4jueUteWtkOaKgOacr++8iETnsbvvvInvvIgxLTE25ZGo77yJW+S4i+mZojIxMl08L2E+PGJyPiA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyByb3dzcGFuPTI+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9Mzg0NzA1JyB0YXJnZXQ9X2JsYW5rPuaVsOeQhuaWueazle+8iDItMTblkajvvIlb5LiL6ZmiMjEyXTwvYT7lj4zlkag8YnI+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9Mzg0NzA1JyB0YXJnZXQ9X2JsYW5rPuaVsOeQhuaWueazle+8iDEtMTXlkajvvIlb5LiL6ZmiMjEyXTwvYT7ljZXlkag8YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD4gPC90cj4gPHRyPiA8dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzdGl0Mic+NCA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPiA8L3RyPiA8dHI+IDx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3N0aXQyJz41IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyByb3dzcGFuPTQ+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9Mzg0NzMxJyB0YXJnZXQ9X2JsYW5rPuWkp+WtpueJqeeQhuWunumqjO+8iDLvvInvvIgzLTnlkajvvIlb5pWZ5a6k5pyq5a6aXTwvYT48YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD4gPC90cj4gPHRyPiA8dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzdGl0Mic+NiA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPiA8L3RyPiA8dHI+IDx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3N0aXQyJz43IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nIHJvd3NwYW49Mj48YSBocmVmPScuLi8uLi9sZXNzb24vdmlld0xlc3NvbkFycmFuZ2VEZXRhaWwyLmFzcHg/YnNpZD0zODU3NTAnIHRhcmdldD1fYmxhbms+5L2T6IKy77yIM++8ie+8iDEtMTblkajvvIlb5pWZ5a6k5pyq5a6aXTwvYT48YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD4gPC90cj4gPHRyPiA8dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzdGl0Mic+OCA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+IDwvdHI+IDx0cj4gPHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc3RpdDInPjkgPC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyByb3dzcGFuPTI+PGEgaHJlZj0nLi4vLi4vbGVzc29uL3ZpZXdMZXNzb25BcnJhbmdlRGV0YWlsMi5hc3B4P2JzaWQ9Mzg1NjEyJyB0YXJnZXQ9X2JsYW5rPuW9ouWKv+S4juaUv+etlu+8iDEtMTblkajvvIlb5Lic5LiK6ZmiMTA2XTwvYT48YnI+IDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPiA8L3RyPiA8dHI+IDx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3N0aXQyJz4xMCA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPiA8L3RyPiA8dHI+IDx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3N0aXQyJz4xMSA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD4gPC90cj4gPHRyPiA8dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzdGl0Mic+MTIgPC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+IDwvdHI+IDx0cj4gPHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc3RpdDInPjEzIDwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPiA8L3RyPiA8dHI+IDx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3N0aXQyJz4xNCA8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD48dGQgYWxpZ249J2NlbnRlcicgY2xhc3M9J2NsYXNzbWFpbicgPiZuYnNwOzwvdGQ+PHRkIGFsaWduPSdjZW50ZXInIGNsYXNzPSdjbGFzc21haW4nID4mbmJzcDs8L3RkPjx0ZCBhbGlnbj0nY2VudGVyJyBjbGFzcz0nY2xhc3NtYWluJyA+Jm5ic3A7PC90ZD4gPC90cj4gPC90YWJsZT4gPC90ZD4gPC90cj4gPC90YWJsZT5kAgcPPCsACwBkZEYSZTRxlRrk0vlOCG94fpOmTYVa',
	'__VIEWSTATEGENERATOR': 'BA3F6BA5',
	'__EVENTVALIDATION': '/wEWDAL5x/+ACQLP8PpIArq167kIAsa8nOsGAsa8rOsGArq44P0EAtqXoZYOAszbpPEBApzO4PwNAuyp7W8Cipfl9wUC5cSDhgVJH7qBebq8gWIDvriwuMRWUWrQ0Q==',
	'SpeltyRequiredCourse1$btnTxk': course_type
}
post_data3['SpeltyRequiredCourse1$btnTxk'] = course_type
post_data3 = urllib.parse.urlencode(post_data3).encode('utf8')
# headers和前面一样，不用更新
req3 = urllib.request.Request('http://electsys.sjtu.edu.cn/edu/student/elect/speltyRequiredCourse.aspx', post_data3,
							  headers)
res3 = opener.open(req3)

course_num = [
	("人文学科", "02"),
	("社会科学", "03"),
	("自然科学", "04"),
	("工程科学与技术", "05")
]
sub_course_type = course_num[3]
post_data4 = {
	'__EVENTTARGET': 'gridGModule$ctl' + sub_course_type[1] + '$radioButton',
	'__EVENTARGUMENT': '',
	'__LASTFOCUS': '',
	'__VIEWSTATEGENERATOR': '12F11519',
	'__EVENTVALIDATION': '/wEWDwKVh9jqCwLc6pTCDQL59JLCDQKmuL/CDQLLxLzCDQKIxK6NAgKDqOrpBwLwkrn8BgLwksG+CQLs9POaDwL8kq1jAuyE+oUBAorb5P4MAp3rlJIJAsKL2t4DQrh2Hznkoo5sJhFyQ1aPy1r7pTQ=',
	'gridGModule$ctl' + sub_course_type[1] + '$radioButton': 'radioButton'
}
post_data4 = urllib.parse.urlencode(post_data4).encode('utf8')
req4 = urllib.request.Request('http://electsys.sjtu.edu.cn/edu/student/elect/speltyCommonCourse.aspx', post_data4,
							  headers)
res4 = opener.open(req4)

course_code = 'CS902'
post_data5 = {
	'__EVENTTARGET': '',
	'__EVENTARGUMENT': '',
	'__LASTFOCUS': '',
	'__VIEWSTATEGENERATOR': '12F11519',
	'__EVENTVALIDATION': '/wEWDwKLu5vWBwLc6pTCDQL59JLCDQKmuL/CDQLLxLzCDQKIxK6NAgKDqOrpBwLwkrn8BgLwksG+CQLs9POaDwL8kq1jAuyE+oUBAorb5P4MAp3rlJIJAsKL2t4D4sNAK4d9go7yCc+U7x7g1OMrWEc=',
	'gridGModule$ctl' + sub_course_type[1] + '$radioButton': 'radioButton',
	'myradiogroup': course_code,
	'lessonArrange': '课程安排'
}
post_data5 = urllib.parse.urlencode(post_data5).encode('utf8')
req5 = urllib.request.Request('http://electsys.sjtu.edu.cn/edu/student/elect/speltyCommonCourse.aspx', post_data5,
							  headers)
res5 = opener.open(req5)

post_data6 = {
	'__VIEWSTATE': '/wEPDwUJMzg0ODEwOTgwD2QWAgIBD2QWAgIBD2QWAgIBDzwrAAsBAA8WCB4IRGF0YUtleXMWAwUKQ1M5MDIgICAgIAUKQ1M5MDIgICAgIAUKQ1M5MDIgICAgIB4LXyFJdGVtQ291bnQCAx4JUGFnZUNvdW50AgEeFV8hRGF0YVNvdXJjZUl0ZW1Db3VudAIDZBYCZg9kFgYCAQ9kFiZmD2QWAgIBDw8WAh4EVGV4dAUzPGlucHV0IHR5cGU9cmFkaW8gbmFtZT0nbXlyYWRpb2dyb3VwJyB2YWx1ZT0zODQ3MTQ+ZGQCAQ8PFgIfBAUGMzg0NzE0ZGQCAg8PFgIfBAUKQ1M5MDIgICAgIGRkAgMPDxYCHwQFCemZhuacneS/imRkAgQPDxYCHwQFG+WJr+aVmeaOiCAgICAgICAgICAgICAgICAgIGRkAgUPDxYCHwQFNTAwMy0oMjAxNy0yMDE4LTEpQ1M5MDIo5pWZ5a2m54+tKSAgICAgICAgICAgICAgICAgICAgZGQCBg8PFgIfBAUCNDhkZAIHDw8WAh8EBQI4MGRkAggPDxYCHwQFAjEwZGQCCQ8PFgIfBAUCNDJkZAIKDw8WAh8EBQEwZGQCCw8PFgIfBAV9KDEtMTblkagpPGJyPuihjOivvuWuieaOkuS4uuesrDEtMTblkags5YW25LitOjxicj4K5pif5pyf5LqUICDnrKw26IqCLS3nrKw46IqCPGJyPgrkuIvpmaIxMTEoMS0xNuWRqCkg6ZmG5pyd5L+KKDEtMTblkagpPGJyPgpkZAIMDw8WAh8EBYYC5L2/55SoUHl0aG9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRkAg0PDxYCHwQFBiZuYnNwO2RkAg4PDxYCHwQFATFkZAIPDw8WAh8EBQExZGQCEA8PFgIfBAUJMjAxNy0yMDE4ZGQCEQ8PFgIfBAUBMWRkAhIPDxYCHwQFCjEwMjQ4OTQ1MzZkZAICD2QWJmYPZBYCAgEPDxYCHwQFMzxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9J215cmFkaW9ncm91cCcgdmFsdWU9Mzg0NzEyPmRkAgEPDxYCHwQFBjM4NDcxMmRkAgIPDxYCHwQFCkNTOTAyICAgICBkZAIDDw8WAh8EBQnlvKDlqpvlqptkZAIEDw8WAh8EBRvlia/mlZnmjoggICAgICAgICAgICAgICAgICBkZAIFDw8WAh8EBTUwMDEtKDIwMTctMjAxOC0xKUNTOTAyKOaVmeWtpuePrSkgICAgICAgICAgICAgICAgICAgIGRkAgYPDxYCHwQFAjQ4ZGQCBw8PFgIfBAUCNjBkZAIIDw8WAh8EBQIxMGRkAgkPDxYCHwQFAjIyZGQCCg8PFgIfBAUBMGRkAgsPDxYCHwQFgAEoMS0xNuWRqCk8YnI+6KGM6K++5a6J5o6S5Li656ysMS0xNuWRqCzlhbbkuK06PGJyPgrmmJ/mnJ/lm5sgIOesrDboioItLeesrDjoioI8YnI+CuS4nOS4i+mZojQwNSgxLTE25ZGoKSDlvKDlqpvlqpsoMS0xNuWRqCk8YnI+CmRkAgwPDxYCHwQFiQLlj4zor63vvIzkvb/nlKhQeXRob24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGQCDQ8PFgIfBAUGJm5ic3A7ZGQCDg8PFgIfBAUBMWRkAg8PDxYCHwQFATFkZAIQDw8WAh8EBQkyMDE3LTIwMThkZAIRDw8WAh8EBQExZGQCEg8PFgIfBAUFMTEwMTVkZAIDD2QWJmYPZBYCAgEPDxYCHwQFMzxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9J215cmFkaW9ncm91cCcgdmFsdWU9Mzg0NzEzPmRkAgEPDxYCHwQFBjM4NDcxM2RkAgIPDxYCHwQFCkNTOTAyICAgICBkZAIDDw8WAh8EBQnpmYbmnJ3kv4pkZAIEDw8WAh8EBRvlia/mlZnmjoggICAgICAgICAgICAgICAgICBkZAIFDw8WAh8EBTUwMDItKDIwMTctMjAxOC0xKUNTOTAyKOaVmeWtpuePrSkgICAgICAgICAgICAgICAgICAgIGRkAgYPDxYCHwQFAjQ4ZGQCBw8PFgIfBAUCODBkZAIIDw8WAh8EBQIxMGRkAgkPDxYCHwQFAjQwZGQCCg8PFgIfBAUBMGRkAgsPDxYCHwQFfSgxLTE25ZGoKTxicj7ooYzor77lronmjpLkuLrnrKwxLTE25ZGoLOWFtuS4rTo8YnI+CuaYn+acn+S6jCAg56ysNuiKgi0t56ysOOiKgjxicj4K5LiL6ZmiMTEyKDEtMTblkagpIOmZhuacneS/iigxLTE25ZGoKTxicj4KZGQCDA8PFgIfBAWGAuS9v+eUqFB5dGhvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZAINDw8WAh8EBQYmbmJzcDtkZAIODw8WAh8EBQExZGQCDw8PFgIfBAUBMWRkAhAPDxYCHwQFCTIwMTctMjAxOGRkAhEPDxYCHwQFATFkZAISDw8WAh8EBQoxMDI0ODk0NTM2ZGRkopkP8qfjuafr+yXH9pFRFbim6oA=',
	'__VIEWSTATEGENERATOR': 'F0FD71F5',
	'__EVENTVALIDATION': '/wEWBwLahaCUBAKGp67DDgKV1aTMBgL15/CHCwLNk+rqAwKTuv28BgKQjazECjaPLWPbnzg/IRavxGcwu9Y7vcvU',
	'myradiogroup': '384714',
	'LessonTime1$btnChoose': '选定此教师'
}
post_data6 = urllib.parse.urlencode(post_data6).encode('utf8')
req6 = urllib.request.Request(
	'http://electsys.sjtu.edu.cn/edu/lesson/viewLessonArrange.aspx?kcdm=CS902&xklx=%u901a%u8bc6&redirectForm=speltyCommonCourse.aspx&yxdm=&tskmk=840&kcmk=-1&nj=%u65e0',
	post_data6, headers)  # 此处postURL不同的科目类型各不相同貌似
res6 = opener.open(req6)
# print(res2.read().decode('utf8'))

# req7 选课提交的post_data有点棘手，考虑从得到的源码中获取_viewstategenerator
